# Contenido para ./nginx.conf (el de la raíz)

events {
    worker_connections 1024;
}

http {
    server {
        listen 80;

        # --- Django Admin/DRF Static Files ---
        # Ruta específica para los estáticos del backend
        location /api-static/ {
            alias /app/static/;
        }

        # --- API ---
        # Pasa las llamadas a la API al backend
        location /api/ {
            proxy_pass http://backend:8000/api/;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
        }

        # --- Frontend (React App) ---
        # Pasa todo lo demás (/, /static/js, /static/css, etc.)
        # al contenedor del frontend, que sabe cómo manejarlos.
        location / {
            proxy_pass http://frontend:80;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
        }
    }
}